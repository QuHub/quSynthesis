#pragma once
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <math.h>
#include <msclr\marshal.h>
#include <windows.h>
#include "Function.h"

using namespace System;
using namespace System::Collections::Generic;
using namespace std;
using namespace System::IO;

#define INPUT_DIR "..\\inputs\\"


namespace QuLogic {
  public ref class FunctionReader {
    UINT m_nCount;
    ULONGLONG m_nFiles, m_nSequence, m_nBits, m_nTerms;
    array<String^, 1>^ m_Files;
    StreamReader ^m_sr;
    ULONGLONG *m_pInput;
    List<Function^>^ m_Functions;

  public:
    int Count() {return m_nCount;}


    FunctionReader(String^ FilePattern) {
      m_Functions =  gcnew List<Function^>();
      array<String^>^ files = Directory::GetFiles(INPUT_DIR, FilePattern + ".txt");

      m_nCount = files->Length;
      for(int i =0; i < m_nCount ; i++) 
          Read(files[i]);
    }

    void Read(String^ fileName)
    {
    }

    ~FunctionReader()
    {
    }

    Function^ Next()
    {
      /*
      ULONGLONG pIn[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31};
      ULONGLONG pOut[] = {0, 16, 32, 48, 64, 80, 96, 112, 2, 4, 18, 20, 34, 36, 50, 52, 68, 84, 5, 21, 37, 53, 8, 24, 6, 128, 7, 1, 23, 17, 10, 12};
      return gcnew Function("Ankit", 8, 32, pIn, pOut);

      example 1
      ULONGLONG pIn[] = {0, 1, 2, 3, 4, 5, 6, 7};
      ULONGLONG pOut[] = {0, 1, 16, 2, 32, 4, 48, 8};
      return gcnew Function("Example 1", 6, sizeof(pOut)/sizeof(ULONGLONG), pIn, pOut);

      example 2
      ULONGLONG pIn[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63};
      ULONGLONG pOut[] = {0, 4, 8, 12, 16, 20, 24, 28, 32, 36, 40, 44, 48, 52, 56, 60, 1, 5, 2, 6, 10, 14, 18, 22, 26, 30, 34, 38, 42, 46, 50, 54, 9, 13, 58, 62, 66, 70, 74, 78, 82, 86, 90, 94, 98, 102, 106, 110, 64, 68, 72, 76, 80, 84, 88, 92, 96, 100, 104, 108, 112, 116, 120, 127};
      return gcnew Function("Example 2", 7, sizeof(pOut)/sizeof(ULONGLONG), pIn, pOut);

      example 3
      ULONGLONG pIn[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127};
      ULONGLONG pOut[] = {0, 1, 8, 9, 16, 2, 24, 10, 32, 17, 40, 25, 48, 18, 56, 26, 64, 33, 72, 41, 80, 34, 88, 42, 96, 49, 4, 5, 104, 50, 12, 6, 112, 57, 120, 65, 128, 58, 136, 66, 144, 73, 152, 81, 160, 74, 168, 82, 176, 89, 184, 97, 192, 90, 200, 98, 208, 105, 20, 13, 216, 106, 28, 14, 224, 113, 232, 121, 240, 114, 248, 122, 256, 129, 264, 137, 272, 130, 280, 138, 288, 145, 296, 153, 304, 146, 312, 154, 320, 161, 36, 21, 328, 162, 44, 22, 336, 169, 52, 29, 344, 170, 60, 30, 352, 177, 68, 37, 360, 178, 76, 38, 368, 185, 84, 45, 376, 186, 92, 46, 384, 193, 392, 201, 400, 194, 408, 202};
      return gcnew Function("Example 3", 9, sizeof(pOut)/sizeof(ULONGLONG), pIn, pOut);
      */
      ULONGLONG pIn[] = {0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255};
      ULONGLONG pOut[] = {0, 1, 5, 9, 13, 17, 21, 25, 29, 33, 37, 41, 45, 49, 53, 57, 2, 6, 10, 14, 18, 22, 26, 30, 34, 38, 42, 46, 50, 54, 58, 62, 4, 61, 65, 69, 73, 77, 81, 85, 89, 93, 97, 101, 105, 109, 113, 117, 66, 70, 74, 78, 82, 86, 90, 94, 98, 102, 106, 110, 114, 118, 122, 126, 8, 121, 125, 129, 133, 137, 141, 145, 149, 153, 157, 161, 165, 169, 173, 177, 130, 134, 138, 142, 146, 150, 154, 158, 162, 166, 170, 174, 178, 182, 186, 190, 12, 181, 185, 189, 193, 197, 201, 205, 209, 213, 217, 221, 225, 229, 233, 237, 194, 198, 202, 206, 210, 214, 218, 222, 226, 230, 234, 238, 242, 246, 250, 254, 16, 20, 24, 28, 32, 36, 40, 44, 48, 52, 56, 60, 64, 68, 72, 76, 258, 262, 266, 270, 274, 278, 282, 286, 290, 294, 298, 302, 306, 310, 314, 318, 80, 84, 88, 92, 96, 100, 104, 108, 112, 116, 120, 124, 128, 132, 136, 140, 322, 326, 330, 334, 338, 342, 346, 350, 354, 358, 362, 366, 370, 374, 378, 382, 144, 148, 152, 156, 160, 164, 168, 172, 176, 180, 184, 188, 192, 196, 200, 204, 386, 390, 394, 398, 402, 406, 410, 414, 418, 422, 426, 430, 434, 438, 442, 446, 450, 454, 458, 462, 466, 470, 474, 478, 482, 486, 490, 494, 498, 502, 506, 510, 208, 212, 216, 220, 224, 228, 232, 236, 240, 244, 248, 252, 256, 260, 264, 268};
      return gcnew Function("Example 3", 9, sizeof(pOut)/sizeof(ULONGLONG), pIn, pOut);
    }
  };
}

/*
example 1 3/6 bits): 0 1 16 2 32 4 48 8
skip- example 2 6/7 bits: 0 4 8 12 16 20 24 28 32 36 40 44 48 52 56 60 1 5 2 6 10 14 18 22 26 30 34 38 42 46 50 54 9 13 58 62 66 70 74 78 82 86 90 94 98 102 106 110 64 68 72 76 80 84 88 92 96 100 104 108 112 116 120 124
example 3 7/9 bits: 0 1 8 9 16 2 24 10 32 17 40 25 48 18 56 26 64 33 72 41 80 34 88 42 96 49 4 5 104 50 12 6 112 57 120 65 128 58 136 66 144 73 152 81 160 74 168 82 176 89 184 97 192 90 200 98 208 105 20 13 216 106 28 14 224 113 232 121 240 114 248 122 256 129 264 137 272 130 280 138 288 145 296 153 304 146 312 154 320 161 36 21 328 162 44 22 336 169 52 29 344 170 60 30 352 177 68 37 360 178 76 38 368 185 84 45 376 186 92 46 384 193 392 201 400 194 408 202
example 4 8/9 bits: 0 1 5 9 13 17 21 25 29 33 37 41 45 49 53 57 2 6 10 14 18 22 26 30 34 38 42 46 50 54 58 62 4 61 65 69 73 77 81 85 89 93 97 101 105 109 113 117 66 70 74 78 82 86 90 94 98 102 106 110 114 118 122 126 8 121 125 129 133 137 141 145 149 153 157 161 165 169 173 177 130 134 138 142 146 150 154 158 162 166 170 174 178 182 186 190 12 181 185 189 193 197 201 205 209 213 217 221 225 229 233 237 194 198 202 206 210 214 218 222 226 230 234 238 242 246 250 254 16 20 24 28 32 36 40 44 48 52 56 60 64 68 72 76 258 262 266 270 274 278 282 286 290 294 298 302 306 310 314 318 80 84 88 92 96 100 104 108 112 116 120 124 128 132 136 140 322 326 330 334 338 342 346 350 354 358 362 366 370 374 378 382 144 148 152 156 160 164 168 172 176 180 184 188 192 196 200 204 386 390 394 398 402 406 410 414 418 422 426 430 434 438 442 446 450 454 458 462 466 470 474 478 482 486 490 494 498 502 506 510 208 212 216 220 224 228 232 236 240 244 248 252 256 260 264 268


*/
